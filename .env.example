# =============================================================================
# SUPABASE SELF-HOSTED CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in all values
# Generate secrets with: openssl rand -base64 32

# =============================================================================
# DOMAIN & URLs
# =============================================================================
# Kong API Gateway domain (used by haex-sync-server)
DOMAIN=api.sync.haex.space

# Studio domain (separate subdomain for dashboard)
STUDIO_DOMAIN=studio.sync.haex.space

# Site URL (for auth redirects - this is where haex-space frontend lives)
SITE_URL=https://sync.haex.space
API_EXTERNAL_URL=https://api.sync.haex.space

# =============================================================================
# POSTGRES DATABASE
# =============================================================================
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_USER=postgres
# IMPORTANT: Only use alphanumeric characters (no special chars like @, $, etc.)
POSTGRES_PASSWORD=your-super-secret-postgres-password-min-32-chars

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# IMPORTANT: Must be at least 32 characters
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters
JWT_EXPIRY=3600

# Generate these with: https://supabase.com/docs/guides/self-hosting/docker#generate-api-keys
# Or use the scripts/generate-keys.sh script
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# =============================================================================
# DASHBOARD AUTHENTICATION
# =============================================================================
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=your-super-secret-dashboard-password
# Generate with: htpasswd -nb admin password | sed 's/\$/\$\$/g'
DASHBOARD_PASSWORD_HASH=$$apr1$$...

# =============================================================================
# GOTRUE (AUTH) CONFIGURATION
# =============================================================================
# Disable signup if you want invite-only
DISABLE_SIGNUP=false

# SMTP for email authentication (optional but recommended)
SMTP_ADMIN_EMAIL=admin@haex.space
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
SMTP_SENDER_NAME=HaexHub

# OAuth Providers (optional)
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# =============================================================================
# ENCRYPTION KEYS
# =============================================================================
# Must be exactly 32 characters
VAULT_ENC_KEY=your-vault-encryption-key-32char

# At least 64 characters
SECRET_KEY_BASE=your-secret-key-base-must-be-at-least-64-characters-long-for-security

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
STORAGE_BACKEND=file
# For S3-compatible storage backend (where files are stored):
# STORAGE_BACKEND=s3
# STORAGE_S3_BUCKET=your-bucket
# STORAGE_S3_ENDPOINT=https://s3.amazonaws.com
# STORAGE_S3_REGION=eu-central-1
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=

# S3 Protocol Access (for S3-compatible API access to Supabase Storage)
# Generate with: openssl rand -hex 16 (for key id) and openssl rand -hex 32 (for secret)
S3_PROTOCOL_ACCESS_KEY_ID=
S3_PROTOCOL_ACCESS_KEY_SECRET=

# =============================================================================
# REALTIME CONFIGURATION
# =============================================================================
# Secret for Realtime RLS
REALTIME_SECRET_KEY_BASE=your-realtime-secret-key-base-must-be-at-least-64-characters

# Tenant name for multi-tenant routing (URL-compatible, no special chars)
# Used as hostname prefix: ${REALTIME_TENANT_NAME}.sync-supabase
REALTIME_TENANT_NAME=realtime

# =============================================================================
# ANALYTICS (optional - can be disabled)
# =============================================================================
LOGFLARE_API_KEY=your-logflare-api-key
LOGFLARE_SOURCE_ID=your-logflare-source-id

# =============================================================================
# TRAEFIK NETWORK
# =============================================================================
TRAEFIK_NETWORK=proxy

# =============================================================================
# IMAGE VERSIONS (optional - defaults to latest stable)
# =============================================================================
# POSTGRES_IMAGE=supabase/postgres:15.8.1.085
# STUDIO_IMAGE=supabase/studio:2025.12.17-sha-43f4f7f
# GOTRUE_IMAGE=supabase/gotrue:v2.184.0
# REALTIME_IMAGE=supabase/realtime:v2.68.0
# STORAGE_IMAGE=supabase/storage-api:v1.33.0
# POSTGREST_IMAGE=postgrest/postgrest:v14.1
# KONG_IMAGE=kong:2.8.1
# META_IMAGE=supabase/postgres-meta:v0.95.1
